(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{5200:(e,t,a)=>{"use strict";a.d(t,{SupabaseProvider:()=>u,_:()=>m});var r=a(12115),s=a(55647);let n="https://yrrmtcvviactkmxibodu.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlycm10Y3Z2aWFjdGtteGlib2R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0NDA4MjYsImV4cCI6MjA2NzAxNjgyNn0.K1ZxrtCWKCLLpPNJf0CkR0H7LRNsvMb07Uy2TuFXwh0",i=()=>{if(!n||!o)throw Error("Supabase 환경변수가 누락되었습니다.");return(0,s.UU)(n,o)};var d=a(56671),l=a(68974);let c=(0,r.createContext)(void 0),u=e=>{let{children:t}=e,{mutate:a}=(0,l.iX)(),s=async()=>{let{data:e,error:t}=await i().from("commutes").select("*").order("timestamp",{ascending:!1}).limit(50);if(t)throw t;return e||[]},n=async()=>{let{data:e,error:t}=await i().from("moods").select("*").order("timestamp",{ascending:!1}).limit(50);if(t)throw t;return e||[]},o=async()=>{let{data:e,error:t}=await i().from("game_scores").select("*").eq("game","dino").order("score",{ascending:!1}).order("created_at",{ascending:!0}).limit(10);if(t)throw t;return e||[]},u=async()=>{let e=new Date,t=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().slice(0,10),{data:a,error:r}=await i().from("game_scores").select("*").eq("game","commantle").gte("created_at","".concat(t,"T00:00:00.000Z")).lte("created_at","".concat(t,"T23:59:59.999Z")).order("score",{ascending:!0}).order("created_at",{ascending:!0});if(r)throw r;return a||[]},m=async e=>{let{error:t}=await i().from("commutes").insert([e]);if(t)throw d.oR.error("출퇴근 기록 추가에 실패했습니다."),t;a("commutes")},f=async e=>{let{error:t}=await i().from("moods").insert([e]);if(t)throw d.oR.error("기분 데이터 추가에 실패했습니다."),t;a("moods")},h=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"commantle";try{let s=new Date,n=new Date(s.getTime()-6e4*s.getTimezoneOffset()).toISOString().slice(0,10),{data:o,error:d}=await i().from("game_scores").select("*").eq("nickname",t).eq("game",r).gte("created_at","".concat(n,"T00:00:00.000Z")).lte("created_at","".concat(n,"T23:59:59.999Z")).single();if(d&&"PGRST116"!==d.code)throw d;if(o){if(e<o.score){let{error:t}=await i().from("game_scores").update({score:e,created_at:new Date().toISOString()}).eq("id",o.id);if(t)throw t}}else{let{error:a}=await i().from("game_scores").insert([{nickname:t,game:r,score:e,created_at:new Date().toISOString()}]);if(a)throw a}a("commantle"===r?"commantleScores":"dinoScores")}catch(e){throw d.oR.error("게임 스코어 추가에 실패했습니다."),e}};return r.createElement(c.Provider,{value:{addCommute:m,addMood:f,addGameScore:h,fetchCommutes:s,fetchMoods:n,fetchDinoScores:o,fetchCommantleScores:u}},t)},m=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e}},16038:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,40611,23)),Promise.resolve().then(a.t.bind(a,30347,23)),Promise.resolve().then(a.bind(a,93506)),Promise.resolve().then(a.bind(a,67280)),Promise.resolve().then(a.bind(a,89074)),Promise.resolve().then(a.bind(a,5200))},22491:(e,t,a)=>{"use strict";a.d(t,{a:()=>u});var r=a(12115);let s=["즐거운","신나는","평온한","활기찬","차분한","열정적인","창의적인","꼼꼼한","친절한","유쾌한","진지한","유연한","성실한","도전적인","긍정적인","배려하는","책임감있는","협력하는"],n=["개발자","디자이너","기획자","마케터","영업사원","회계사","의사","교사","엔지니어","작가","예술가","요리사","운동선수","음악가","사진작가","여행자","독서가","요가인"],o={COMMUTE_RECORDS:"go-home-commute-records",MOOD_DATA:"go-home-mood-data"};var i=a(51368),d=a(5200),l=a(56671),c=a(19169);function u(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),{addCommute:g,fetchCommutes:x}=(0,d._)(),{data:v}=(0,c.Ay)("commutes",x);(0,r.useEffect)(()=>{let e=localStorage.getItem("go-home-nickname");if(e)o(e);else{let e=function(){let e=s[Math.floor(Math.random()*s.length)],t=n[Math.floor(Math.random()*n.length)],a=Math.floor(9999*Math.random())+1;return"".concat(e).concat(t).concat(a)}();o(e),localStorage.setItem("go-home-nickname",e)}let t=localStorage.getItem("go-home-uuid");if(t)m(t);else{let e=(0,i.A)();localStorage.setItem("go-home-uuid",e),m(e)}},[]),(0,r.useEffect)(()=>{if(!v)return;let e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),r=a+864e5;t(v.filter(e=>e.uuid===u&&e.timestamp>=a&&e.timestamp<r))},[v,u]);let p=async e=>{h(!0);try{let t={uuid:u,type:e,timestamp:Date.now(),nickname:a};return await g(t),l.oR.success("".concat(e," 기록에 성공했습니다.")),t}catch(t){throw console.error("Failed to record commute:",t),l.oR.error("".concat(e," 기록에 실패했습니다.")),t}finally{h(!1)}};return{todayRecords:e,nickname:a,isLoading:f,recordCommute:p,getTodayCommute:()=>e.find(e=>"출근"===e.type),getTodayLeave:()=>e.find(e=>"퇴근"===e.type),uuid:u}}},29069:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var r=a(95155),s=a(12115),n=a(91394),o=a(30285),i=a(66695),d=a(59434);function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("animate-pulse rounded-md bg-muted",t),...a})}var c=a(51154);function u(e){let{nickname:t,userId:a,onCommute:d,commuteTime:u,isLoading:m=!1}=e,[f,h]=(0,s.useState)(null),g=async e=>{if(!m&&!f){h(e);try{await d(e)}finally{h(null)}}};return m?(0,r.jsxs)(i.Zp,{className:"w-full",children:[(0,r.jsx)(i.aR,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(l,{className:"h-12 w-12 rounded-full"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l,{className:"h-4 w-[200px]"}),(0,r.jsx)(l,{className:"h-3 w-[150px]"})]})]})}),(0,r.jsxs)(i.Wu,{className:"space-y-3",children:[(0,r.jsx)(l,{className:"h-9 w-full"}),(0,r.jsx)(l,{className:"h-9 w-full"})]})]}):(0,r.jsxs)(i.Zp,{className:"w-full",children:[(0,r.jsx)(i.aR,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(n.eu,{className:"h-12 w-12",children:[(0,r.jsx)(n.BK,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(encodeURIComponent(t),"&backgroundColor=transparent&radius=50"),alt:t}),(0,r.jsx)(n.q5,{className:"bg-primary text-primary-foreground text-lg",children:t.slice(0,2)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(i.ZB,{className:"text-base",children:t}),(0,r.jsx)(i.BT,{children:a})]})]})}),(0,r.jsxs)(i.Wu,{className:"space-y-3",children:[(0,r.jsx)(o.$,{variant:(null==u?void 0:u.start)?"secondary":"default",className:"w-full",disabled:!!f||!!(null==u?void 0:u.start),onClick:()=>g("출근"),children:"출근"===f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"처리 중..."]}):(null==u?void 0:u.start)?"출근 완료 (".concat(u.start,")"):"출근하기"}),(0,r.jsx)(o.$,{variant:(null==u?void 0:u.end)?"secondary":"default",className:"w-full",disabled:!!f||!(null==u?void 0:u.start)||!!(null==u?void 0:u.end),onClick:()=>g("퇴근"),children:"퇴근"===f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"처리 중..."]}):(null==u?void 0:u.end)?"퇴근 완료 (".concat(u.end,")"):"퇴근하기"})]})]})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var r=a(95155);a(12115);var s=a(99708),n=a(74466),o=a(59434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:n,asChild:d=!1,...l}=e,c=d?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:a,size:n,className:t})),...l})}},30347:()=>{},52814:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(95155);a(12115);var s=a(74466),n=a(59434);let o=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(o({variant:a}),t),...s})}},59434:(e,t,a)=>{"use strict";a.d(t,{Q:()=>d,cn:()=>i});var r=a(52596),s=a(39688),n=a(25418),o=a.n(n);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function d(e,t){let a=o().d(e,!0).flat().join(""),r=o().d(t,!0).flat().join("");return 1-function(e,t){let a=Array.from({length:e.length+1},()=>Array(t.length+1).fill(0));for(let t=0;t<=e.length;t++)a[t][0]=t;for(let e=0;e<=t.length;e++)a[0][e]=e;for(let r=1;r<=e.length;r++)for(let s=1;s<=t.length;s++)a[r][s]=Math.min(a[r-1][s]+1,a[r][s-1]+1,a[r-1][s-1]+ +(e[r-1]!==t[s-1]));return a[e.length][t.length]}(a,r)/Math.max(a.length,r.length,1)}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>l,ZB:()=>i,Zp:()=>n,aR:()=>o});var r=a(95155);a(12115);var s=a(59434);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}},67280:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>n});var r=a(95155);a(12115);var s=a(51362);function n(e){let{children:t,...a}=e;return(0,r.jsx)(s.N,{...a,children:t})}},89074:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>o});var r=a(95155),s=a(51362),n=a(56671);let o=e=>{let{...t}=e,{theme:a="system"}=(0,s.D)();return(0,r.jsx)(n.l$,{theme:a,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})}},91394:(e,t,a)=>{"use strict";a.d(t,{BK:()=>d,eu:()=>i,q5:()=>l});var r=a(95155),s=a(12115),n=a(54011),o=a(59434);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});i.displayName=n.bL.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n._V,{ref:t,className:(0,o.cn)("aspect-square h-full w-full",a),...s})});d.displayName=n._V.displayName;let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.H4,{ref:t,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});l.displayName=n.H4.displayName},93506:(e,t,a)=>{"use strict";a.d(t,{default:()=>C});var r=a(95155),s=a(12115),n=a(52814),o=a(30285),i=a(15452),d=a(54416),l=a(59434);function c(e){let{...t}=e;return(0,r.jsx)(i.bL,{"data-slot":"sheet",...t})}function u(e){let{...t}=e;return(0,r.jsx)(i.l9,{"data-slot":"sheet-trigger",...t})}function m(e){let{...t}=e;return(0,r.jsx)(i.ZL,{"data-slot":"sheet-portal",...t})}function f(e){let{className:t,...a}=e;return(0,r.jsx)(i.hJ,{"data-slot":"sheet-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function h(e){let{className:t,children:a,side:s="right",...n}=e;return(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(i.UC,{"data-slot":"sheet-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===s&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===s&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===s&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===s&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[a,(0,r.jsxs)(i.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,r.jsx)(d.A,{className:"size-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}var g=a(74783),x=a(29069),v=a(22491),p=a(62098),b=a(93509),j=a(51362),w=a(25673);function y(e){let{...t}=e;return(0,r.jsx)(w.bL,{"data-slot":"dropdown-menu",...t})}function N(e){let{...t}=e;return(0,r.jsx)(w.l9,{"data-slot":"dropdown-menu-trigger",...t})}function k(e){let{className:t,sideOffset:a=4,...s}=e;return(0,r.jsx)(w.ZL,{children:(0,r.jsx)(w.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function _(e){let{className:t,inset:a,variant:s="default",...n}=e;return(0,r.jsx)(w.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":s,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function S(){let{setTheme:e}=(0,j.D)();return(0,r.jsxs)(y,{children:[(0,r.jsx)(N,{asChild:!0,children:(0,r.jsxs)(o.$,{variant:"outline",size:"icon",children:[(0,r.jsx)(p.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,r.jsx)(b.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,r.jsxs)(k,{align:"end",children:[(0,r.jsx)(_,{onClick:()=>e("light"),children:"Light"}),(0,r.jsx)(_,{onClick:()=>e("dark"),children:"Dark"}),(0,r.jsx)(_,{onClick:()=>e("system"),children:"System"})]})]})}function C(){let{nickname:e,recordCommute:t,getTodayCommute:a,getTodayLeave:i,uuid:d}=(0,v.a)(),[l,m]=(0,s.useState)(!1),f=e=>new Date(e).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});return(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,r.jsxs)("div",{className:"container flex h-14 items-center",children:[(0,r.jsxs)("div",{className:"mr-4 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFE0"}),(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"아 집에가고싶다"})]}),(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-2",children:[(0,r.jsx)(S,{}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)(n.E,{variant:"secondary",children:e})}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsxs)(c,{open:l,onOpenChange:m,children:[(0,r.jsx)(u,{asChild:!0,children:(0,r.jsx)(o.$,{variant:"outline",size:"icon",children:(0,r.jsx)(g.A,{className:"h-4 w-4"})})}),(0,r.jsx)(h,{children:(0,r.jsx)(x.A,{nickname:e,userId:d,onCommute:async e=>{await t(e),m(!1)},commuteTime:{start:a()?f(a().timestamp):void 0,end:i()?f(i().timestamp):void 0}})})]})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[947,131,322,716,441,684,358],()=>t(16038)),_N_E=e.O()}]);