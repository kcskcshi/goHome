(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{268:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var r=s(5155),i=s(2115);function a(e){let{type:t,onClick:s,disabled:a=!1,isLoading:l=!1,hasRecorded:n=!1,recordTime:o}=e,[d,c]=(0,i.useState)(!1),m=async()=>{if(!a&&!l){c(!0);try{await s()}finally{c(!1)}}};return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("button",{onClick:m,disabled:a||l||n,className:"\n          w-full py-4 px-6 rounded-lg font-medium text-lg transition-all duration-200\n          ".concat(n?"bg-github-muted text-github-text cursor-not-allowed":"출근"===t?"bg-github-green hover:bg-github-green-hover text-white":"bg-orange-600 hover:bg-orange-700 text-white","\n          ").concat(d?"scale-95":"","\n          ").concat(a||l||n?"opacity-50 cursor-not-allowed":"hover:shadow-lg","\n        "),children:[l&&(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),l?"처리 중...":n?"".concat(t," 완료"):t]}),n&&o&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"text-github-muted text-sm",children:[t," 시간: ",o]})})]})}let l=[{emoji:"\uD83D\uDE0A",label:"행복"},{emoji:"\uD83D\uDE03",label:"신남"},{emoji:"\uD83D\uDE0C",label:"평온"},{emoji:"\uD83D\uDE34",label:"졸림"},{emoji:"\uD83D\uDE24",label:"열심"},{emoji:"\uD83D\uDE05",label:"힘듦"},{emoji:"\uD83D\uDE14",label:"우울"},{emoji:"\uD83D\uDE21",label:"화남"}];function n(e){let{onSubmit:t,isLoading:s=!1,disabled:a=!1}=e,[n,o]=(0,i.useState)(""),[d,c]=(0,i.useState)("");return(0,r.jsxs)("div",{className:"bg-github-card border border-thin border-github-borderLight rounded-md p-4",children:[(0,r.jsx)("h3",{className:"text-github-text font-bold mb-3 text-lg",children:"오늘 기분은 어떠세요?"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&d.trim()&&!s&&!a&&(t(n,d.trim()),c(""))},className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-github-muted text-xs mb-1",children:"기분 선택"}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"grid grid-cols-4 gap-1",children:l.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>o(e.emoji),disabled:a,className:"\n                    p-1 rounded-md text-base transition-all duration-200\n                    ".concat(n===e.emoji?"bg-github-green text-white":"bg-github-bg border border-thin border-github-borderLight text-github-text hover:border-github-muted","\n                    ").concat(a?"opacity-50 cursor-not-allowed":"hover:scale-105","\n                  "),title:e.label,children:e.emoji},e.emoji))})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"message",className:"block text-github-muted text-xs mb-1",children:"한 줄 메시지"}),(0,r.jsx)("textarea",{id:"message",value:d,onChange:e=>c(e.target.value),disabled:a||s,placeholder:"오늘 기분을 한 줄로 표현해보세요...",className:"w-full px-2 py-1 bg-github-bg border border-thin border-github-borderLight rounded-sm text-github-text placeholder-github-muted resize-none focus:outline-none focus:border-github-green text-sm",rows:2,maxLength:100}),(0,r.jsxs)("div",{className:"text-right text-github-muted text-xs mt-1",children:[d.length,"/100"]})]}),(0,r.jsx)("button",{type:"submit",disabled:!n||!d.trim()||s||a,className:"\n            w-full py-2 px-3 rounded-md font-medium transition-all duration-200 text-sm\n            ".concat(n&&d.trim()&&!s&&!a?"bg-github-green hover:bg-github-green/90 text-white":"bg-github-muted text-github-text cursor-not-allowed opacity-50","\n          "),children:s?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"공유 중..."]}):"기분 공유하기"})]})]})}var o=s(4065),d=s(2502);function c(e){let{commutes:t,moods:s,myUuid:a}=e,[l,n]=(0,i.useState)({totalUsers:0,earlyBird:"아직 없음",nightOwl:"아직 없음",moodDistribution:[],commuteTimesGo:[],commuteTimesLeave:[],myGoRank:null,myLeaveRank:null,goTotal:0,leaveTotal:0}),[d,c]=(0,i.useState)(!1),m=new Date,h=new Date(m.getFullYear(),m.getMonth(),m.getDate()).getTime(),u=h+864e5,x=s.filter(e=>e.timestamp>=h&&e.timestamp<u),b={};x.forEach(e=>{b[e.emoji]=(b[e.emoji]||0)+1});let g=Object.entries(b).map(e=>{let[t,s]=e;return{emoji:t,count:s}}).sort((e,t)=>t.count-e.count),p=d?g:g.slice(0,5);return(0,i.useEffect)(()=>{let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),i=r+864e5,l=t.filter(e=>e.timestamp>=r&&e.timestamp<i),o=s.filter(e=>e.timestamp>=r&&e.timestamp<i),d=l.filter(e=>"출근"===e.type).sort((e,t)=>e.timestamp-t.timestamp),c=l.filter(e=>"퇴근"===e.type).sort((e,t)=>e.timestamp-t.timestamp),m=d.findIndex(e=>e.uuid===a),h=c.findIndex(e=>e.uuid===a),u=new Set([...o.map(e=>e.nickname),...l.map(e=>e.nickname)]).size,x=d[0],b=c[0],g={};d.forEach(e=>{let t=new Date(e.timestamp).getHours();g[t]=(g[t]||0)+1});let f=Object.entries(g).map(e=>{let[t,s]=e;return{hour:parseInt(t),count:s}}).sort((e,t)=>e.hour-t.hour),j={};c.forEach(e=>{let t=new Date(e.timestamp).getHours();j[t]=(j[t]||0)+1});let y=Object.entries(j).map(e=>{let[t,s]=e;return{hour:parseInt(t),count:s}}).sort((e,t)=>e.hour-t.hour);n({totalUsers:u,earlyBird:(null==x?void 0:x.nickname)||"아직 없음",nightOwl:(null==b?void 0:b.nickname)||"아직 없음",moodDistribution:p,commuteTimesGo:f,commuteTimesLeave:y,myGoRank:m>=0?m+1:null,myLeaveRank:h>=0?h+1:null,goTotal:d.length,leaveTotal:c.length})},[t,s,a]),(0,r.jsxs)("div",{className:"bg-github-card border border-thin border-github-borderLight rounded-md p-4",children:[(0,r.jsx)("h2",{className:"text-github-text font-bold mb-4 text-lg",children:"\uD83D\uDCCA 오늘의 통계"}),(l.myGoRank||l.myLeaveRank)&&(0,r.jsxs)("div",{className:"mb-3 text-center text-sm",children:[(0,r.jsx)("span",{className:"font-bold text-github-green",children:l.myGoRank?"출근 ".concat(l.myGoRank,"등"):""}),l.myGoRank&&l.myLeaveRank&&(0,r.jsx)("span",{className:"mx-2",children:"|"}),(0,r.jsx)("span",{className:"font-bold text-purple-500",children:l.myLeaveRank?"퇴근 ".concat(l.myLeaveRank,"등"):""}),(0,r.jsxs)("span",{className:"ml-2 text-github-muted text-xs",children:["(출근 ",l.goTotal,"명, 퇴근 ",l.leaveTotal,"명)"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-base font-bold text-github-green mb-1",children:l.totalUsers}),(0,r.jsx)("div",{className:"text-github-muted text-xs",children:"참여자"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-base font-bold text-yellow-500 mb-1",children:"\uD83C\uDF05"}),(0,r.jsx)("div",{className:"text-github-muted text-xs",children:"출근왕"}),(0,r.jsx)("div",{className:"text-github-text text-xs mt-1 truncate",children:l.earlyBird})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-base font-bold text-purple-500 mb-1",children:"\uD83C\uDF19"}),(0,r.jsx)("div",{className:"text-github-muted text-xs",children:"칼퇴왕"}),(0,r.jsx)("div",{className:"text-github-text text-xs mt-1 truncate",children:l.nightOwl})]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-stretch mb-2",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-[180px] bg-github-card border border-thin border-github-borderLight rounded-md flex flex-col items-center p-2",children:[(0,r.jsxs)("h3",{className:"text-github-text text-xs font-medium mb-2 text-center flex items-center",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-400 mr-2"}),"기분 분포"]}),l.moodDistribution.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Vd,{data:{labels:l.moodDistribution.map(e=>e.emoji),datasets:[{label:"기분 분포",data:l.moodDistribution.map(e=>e.count),backgroundColor:"rgba(34,197,94,0.2)",borderColor:"rgba(34,197,94,1)",borderWidth:2,pointBackgroundColor:"rgba(34,197,94,1)",pointBorderColor:"#fff",pointRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{r:{angleLines:{display:!1},grid:{color:"#333"},pointLabels:{color:"#fff",font:{size:12}},ticks:{color:"#fff",stepSize:1,backdropColor:"transparent"},min:0}}},style:{maxWidth:160,margin:"0 auto"}}),(0,r.jsx)("ul",{className:"flex flex-wrap gap-2 justify-center mt-2",children:p.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center gap-1 text-sm bg-github-bg border border-github-border rounded px-2 py-1",children:[(0,r.jsx)("span",{children:e.emoji}),(0,r.jsxs)("span",{className:"text-github-muted text-xs",children:[e.count,"명"]})]},t))}),g.length>5&&(0,r.jsx)("button",{className:"mt-2 text-xs text-github-green underline hover:text-github-green/80",onClick:()=>c(e=>!e),children:d?"접기":"더보기"})]}):(0,r.jsx)("div",{className:"text-github-muted text-center py-4 text-xs",children:"데이터 없음"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-[180px] bg-github-card border border-thin border-github-borderLight rounded-md flex flex-col items-center p-2",children:[(0,r.jsx)("h3",{className:"text-github-text text-xs font-medium mb-2 text-center",children:"\uD83C\uDF05 출근 시간 분포"}),(0,r.jsx)(o.O5,{data:{labels:Array.from({length:24},(e,t)=>"".concat(t,"시")),datasets:[{label:"출근",data:Array.from({length:24},(e,t)=>{var s;return(null==(s=l.commuteTimesGo.find(e=>e.hour===t))?void 0:s.count)||0}),backgroundColor:Array.from({length:24},(e,t)=>"rgba(34,197,94,".concat(.3+t/23*.7,")")),borderColor:"rgba(34,197,94,1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#161b22",titleColor:"#c9d1d9",bodyColor:"#c9d1d9",borderColor:"#21262d",borderWidth:1}},scales:{r:{grid:{color:"#333"},pointLabels:{color:"#c9d1d9",font:{size:10}},ticks:{color:"#8b949e",backdropColor:"transparent",stepSize:1}}}},style:{maxWidth:160,margin:"0 auto"}})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-[180px] bg-github-card border border-thin border-github-borderLight rounded-md flex flex-col items-center p-2",children:[(0,r.jsx)("h3",{className:"text-github-text text-xs font-medium mb-2 text-center",children:"\uD83C\uDF19 퇴근 시간 분포"}),(0,r.jsx)(o.O5,{data:{labels:Array.from({length:24},(e,t)=>"".concat(t,"시")),datasets:[{label:"퇴근",data:Array.from({length:24},(e,t)=>{var s;return(null==(s=l.commuteTimesLeave.find(e=>e.hour===t))?void 0:s.count)||0}),backgroundColor:Array.from({length:24},(e,t)=>"rgba(139,92,246,".concat(.3+t/23*.7,")")),borderColor:"rgba(139,92,246,1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#161b22",titleColor:"#c9d1d9",bodyColor:"#c9d1d9",borderColor:"#21262d",borderWidth:1}},scales:{r:{grid:{color:"#333"},pointLabels:{color:"#c9d1d9",font:{size:10}},ticks:{color:"#8b949e",backdropColor:"transparent",stepSize:1}}}},style:{maxWidth:160,margin:"0 auto"}})]})]}),0===l.totalUsers&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC8"}),(0,r.jsx)("div",{className:"text-github-muted",children:"아직 데이터가 없어요."}),(0,r.jsx)("div",{className:"text-github-muted text-sm mt-2",children:"첫 번째로 출근/퇴근을 기록해보세요!"})]})]})}d.t1.register(d.pr,d.FN,d.No,d.dN,d.m_,d.s$,d.G5,d.Bs);var m=s(5647);let h="https://yrrmtcvviactkmxibodu.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlycm10Y3Z2aWFjdGtteGlib2R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0NDA4MjYsImV4cCI6MjA2NzAxNjgyNn0.K1ZxrtCWKCLLpPNJf0CkR0H7LRNsvMb07Uy2TuFXwh0",x=()=>{if(!h||!u)throw Error("Supabase 환경변수가 누락되었습니다.");return(0,m.UU)(h,u)},b=()=>{let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)([]),[a,l]=(0,i.useState)([]),[n,o]=(0,i.useState)(!0),d=async()=>{try{let{data:e,error:s}=await x().from("commutes").select("*").order("timestamp",{ascending:!1}).limit(50);if(s)throw s;t(e||[])}catch(e){console.error("출퇴근 기록 가져오기 실패:",e)}},c=async()=>{try{let{data:e,error:t}=await x().from("moods").select("*").order("timestamp",{ascending:!1}).limit(50);if(t)throw t;r(e||[])}catch(e){console.error("기분 데이터 가져오기 실패:",e)}},m=async()=>{try{let e=new Date().toISOString().slice(0,10),{data:t,error:s}=await x().from("game_scores").select("*").eq("game","commantle").gte("created_at",e+"T00:00:00+09:00").lte("created_at",e+"T23:59:59+09:00").order("score",{ascending:!0}).order("created_at",{ascending:!0});if(s)throw s;l(t||[])}catch(e){console.error("게임 스코어 가져오기 실패:",e)}},h=async()=>{try{let{data:e,error:t}=await x().from("game_scores").select("*").eq("game","dino").order("score",{ascending:!1}).order("created_at",{ascending:!0}).limit(10);if(t)throw t;return e||[]}catch(e){return console.error("디노 러너 랭킹 가져오기 실패:",e),[]}},u=async e=>{try{let{error:t}=await x().from("commutes").insert([e]);if(t)throw t;await d()}catch(e){throw console.error("출퇴근 기록 추가 실패:",e),e}},b=async e=>{try{let{error:t}=await x().from("moods").insert([e]);if(t)throw t;await c()}catch(e){throw console.error("기분 데이터 추가 실패:",e),e}},g=async function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"commantle";try{let{error:i}=await x().from("game_scores").insert([{game:r,score:e,uuid:t,nickname:s}]);if(i)throw i;await m()}catch(e){throw console.error("게임 스코어 추가 실패:",e),e}};return(0,i.useEffect)(()=>{(async()=>{o(!0),await Promise.all([d(),c(),m()]),o(!1)})();let e=x(),t=e.channel("commutes_changes").on("postgres_changes",{event:"*",schema:"public",table:"commutes"},()=>{d()}).subscribe(),s=e.channel("moods_changes").on("postgres_changes",{event:"*",schema:"public",table:"moods"},()=>{c()}).subscribe();return()=>{t.unsubscribe(),s.unsubscribe()}},[]),{commutes:e,moods:s,gameScores:a,loading:n,addCommute:u,addMood:b,fetchCommutes:d,fetchMoods:c,fetchGameScores:m,addGameScore:g,fetchDinoScores:h}};function g(e){let{uuid:t}=e,{gameScores:s,loading:i}=b();return(0,r.jsxs)("div",{className:"bg-github-card border border-github-border rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-github-text font-bold mb-3 text-lg",children:"오늘의 꼬맨틀 순위"}),i?(0,r.jsx)("div",{className:"text-github-muted text-sm",children:"로딩 중..."}):0===s.length?(0,r.jsx)("div",{className:"text-github-muted text-sm",children:"아직 순위가 없습니다."}):(0,r.jsx)("ol",{className:"space-y-2",children:s.map((e,s)=>(0,r.jsxs)("li",{className:"flex justify-between items-center px-3 py-2 rounded ".concat(e.uuid===t?"bg-github-green/20 font-bold":""," ").concat(0===s?"bg-yellow-300/30":1===s?"bg-gray-300/30":2===s?"bg-orange-400/20":""),children:[(0,r.jsxs)("span",{className:"text-github-text flex items-center gap-1",children:[0===s&&(0,r.jsx)("span",{className:"text-yellow-400",children:"\uD83E\uDD47"}),1===s&&(0,r.jsx)("span",{className:"text-gray-300",children:"\uD83E\uDD48"}),2===s&&(0,r.jsx)("span",{className:"text-orange-400",children:"\uD83E\uDD49"}),s+1,"위"]}),(0,r.jsx)("span",{className:"text-github-muted text-sm",children:e.nickname}),(0,r.jsxs)("span",{className:"text-github-text",children:[e.score,"회"]})]},e.id))}),(0,r.jsxs)("div",{className:"text-github-muted text-xs mt-3",children:["※ 시도 횟수가 적을수록 순위가 높아요!",(0,r.jsx)("br",{}),"매일 0시 초기화"]})]})}function p(){let[e,t]=(0,i.useState)("commantle"),{moods:s,commutes:a,loading:l,fetchDinoScores:n}=b(),[o,d]=(0,i.useState)([]);return((0,i.useEffect)(()=>{},[s,a]),(0,i.useEffect)(()=>{"dino"===e&&n().then(d)},[e,n]),l)?(0,r.jsx)("div",{className:"bg-github-card border border-github-border rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center h-32",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-github-green"}),(0,r.jsx)("span",{className:"ml-2 text-github-text",children:"피드 로딩 중..."})]})}):(0,r.jsxs)("div",{className:"bg-github-card border border-thin border-github-borderLight rounded-md",children:[(0,r.jsx)("div",{className:"border-b border-thin border-github-borderLight",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("button",{onClick:()=>t("commantle"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("commantle"===e?"text-github-green border-b border-github-green":"text-github-muted hover:text-github-text"),children:"\uD83D\uDCDD 꼬맨틀 순위"}),(0,r.jsx)("button",{onClick:()=>t("dino"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("dino"===e?"text-github-green border-b border-github-green":"text-github-muted hover:text-github-text"),children:"\uD83E\uDD96 디노 러너 순위"})]})}),(0,r.jsx)("div",{className:"p-4",children:"commantle"===e?(0,r.jsx)(g,{uuid:""}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-center font-bold text-lg mb-2",children:"디노 러너 랭킹 TOP 10"}),o.length>0?(0,r.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-github-borderLight",children:[(0,r.jsx)("th",{className:"py-1",children:"순위"}),(0,r.jsx)("th",{className:"py-1",children:"닉네임"}),(0,r.jsx)("th",{className:"py-1",children:"점수"}),(0,r.jsx)("th",{className:"py-1",children:"날짜"})]})}),(0,r.jsx)("tbody",{children:o.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-github-borderLight",children:[(0,r.jsx)("td",{className:"py-1",children:t+1}),(0,r.jsx)("td",{className:"py-1",children:e.nickname}),(0,r.jsx)("td",{className:"py-1",children:e.score}),(0,r.jsx)("td",{className:"py-1",children:e.created_at.slice(0,10)})]},e.id))})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-2xl mb-3",children:"\uD83E\uDD96"}),(0,r.jsx)("div",{className:"text-github-muted text-sm",children:"아직 디노 러너 기록이 없습니다."})]})]})})]})}let f=["즐거운","신나는","평온한","활기찬","차분한","열정적인","창의적인","꼼꼼한","친절한","유쾌한","진지한","유연한","성실한","도전적인","긍정적인","배려하는","책임감있는","협력하는"],j=["개발자","디자이너","기획자","마케터","영업사원","회계사","의사","교사","엔지니어","작가","예술가","요리사","운동선수","음악가","사진작가","여행자","독서가","요가인"];function y(){let e=f[Math.floor(Math.random()*f.length)],t=j[Math.floor(Math.random()*j.length)],s=Math.floor(9999*Math.random())+1;return"".concat(e).concat(t).concat(s)}function N(){return localStorage.getItem("go-home-nickname")}function v(e){localStorage.setItem("go-home-nickname",e)}var w=s(2056),D=s(1368),S=s(5418),k=s.n(S);let C=e=>{let{x:t,y:s,size:i=32}=e;return(0,r.jsxs)("svg",{x:t,y:s,width:i,height:i,viewBox:"0 0 16 16",style:{position:"absolute",imageRendering:"pixelated"},children:[(0,r.jsx)("rect",{x:"2",y:"7",width:"8",height:"5",fill:"#6ee7b7"}),(0,r.jsx)("rect",{x:"3",y:"12",width:"2",height:"2",fill:"#6ee7b7"}),(0,r.jsx)("rect",{x:"7",y:"12",width:"2",height:"2",fill:"#6ee7b7"}),(0,r.jsx)("rect",{x:"0",y:"9",width:"2",height:"2",fill:"#34d399"}),(0,r.jsx)("rect",{x:"9",y:"5",width:"4",height:"3",fill:"#6ee7b7"}),(0,r.jsx)("rect",{x:"12",y:"6",width:"1",height:"1",fill:"#222"})]})},E=e=>{let{x:t,y:s,size:i=16}=e;return(0,r.jsxs)("svg",{x:t,y:s,width:i,height:i,viewBox:"0 0 12 12",style:{position:"absolute",imageRendering:"pixelated"},children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"6",height:"6",fill:"#f87171"}),(0,r.jsx)("rect",{x:"2",y:"7",width:"2",height:"2",fill:"#fbbf24"}),(0,r.jsx)("rect",{x:"1",y:"9",width:"1",height:"1",fill:"#f59e42"})]})},L=e=>{let{x:t,y:s,size:i=20,frame:a=0}=e;return(0,r.jsxs)("svg",{x:t,y:s,width:i,height:i,viewBox:"0 0 20 12",style:{position:"absolute",imageRendering:"pixelated"},children:[(0,r.jsx)("rect",{x:"8",y:"5",width:"4",height:"2",fill:"#a3a3a3"}),(0,r.jsx)("rect",{x:"12",y:"5",width:"2",height:"1",fill:"#a3a3a3"}),0===a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"4",y:"7",width:"6",height:"1",fill:"#a3a3a3"}),(0,r.jsx)("rect",{x:"2",y:"8",width:"2",height:"1",fill:"#a3a3a3"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"4",y:"4",width:"6",height:"1",fill:"#a3a3a3"}),(0,r.jsx)("rect",{x:"2",y:"3",width:"2",height:"1",fill:"#a3a3a3"})]})]})},I=e=>{let{width:t,y:s=160}=e;return(0,r.jsx)("svg",{x:0,y:s,width:t,height:16,viewBox:"0 0 ".concat(t," 16"),style:{position:"absolute",imageRendering:"pixelated"},children:Array.from({length:Math.ceil(t/8)}).map((e,t)=>(0,r.jsx)("rect",{x:8*t,y:8+t%2*2,width:8,height:4,fill:"#a16207"},t))})};function M(){let e=(0,i.useRef)(void 0),{addGameScore:t}=b(),[s,a]=(0,i.useState)({isPlaying:!1,isGameOver:!1,score:0,highScore:parseInt(localStorage.getItem("dino-high-score")||"0"),dinoY:0,dinoVelocity:0,obstacles:[],gameSpeed:5,isDucking:!1}),[l,n]=(0,i.useState)(()=>{let e=N();return e||v(e=y()),e}),[o,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(0),h=(0,i.useCallback)(()=>{s.isPlaying&&(a(e=>{let s=e.dinoY+e.dinoVelocity,r=e.dinoVelocity+.8;s>=0&&(s=0,r=0);let i=e.obstacles.map(t=>({...t,x:t.x-e.gameSpeed})).filter(e=>e.x>-30);if(.02>Math.random()){let e=.3>Math.random();i.push({x:800,y:e?.5>Math.random()?30:60:0,type:e?"pterodactyl":"cactus"})}let a={x:50,y:e.isDucking?s+20:s,width:40,height:e.isDucking?20:40};if(i.some(e=>{let t={x:e.x,y:e.y,width:30,height:"pterodactyl"===e.type?30:40};return a.x<t.x+t.width&&a.x+a.width>t.x&&a.y<t.y+t.height&&a.y+a.height>t.y}))return e.score>e.highScore&&t(e.score,"temp-uuid",l,"dino"),{...e,isPlaying:!1,isGameOver:!0,dinoY:s,dinoVelocity:r,obstacles:i,highScore:Math.max(e.highScore,e.score)};let n=e.score+1,o=Math.max(e.highScore,n),d=5+Math.floor(n/1e3);return{...e,score:n,highScore:o,dinoY:s,dinoVelocity:r,obstacles:i,gameSpeed:d}}),e.current=requestAnimationFrame(h))},[s.isPlaying,t,l]),u=()=>{a(e=>({...e,isPlaying:!0,isGameOver:!1,score:0,dinoY:0,dinoVelocity:0,obstacles:[],gameSpeed:5,isDucking:!1}))},x=()=>{s.isPlaying&&0===s.dinoY&&a(e=>({...e,dinoVelocity:-15}))},g=e=>{s.isPlaying&&a(t=>({...t,isDucking:e}))};(0,i.useEffect)(()=>{let e=e=>{"Space"===e.code||"ArrowUp"===e.code?(e.preventDefault(),x()):"ArrowDown"===e.code&&(e.preventDefault(),g(!0))},t=e=>{"ArrowDown"===e.code&&(e.preventDefault(),g(!1))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[s.isPlaying]),(0,i.useEffect)(()=>(s.isPlaying?e.current=requestAnimationFrame(h):e.current&&cancelAnimationFrame(e.current),()=>{e.current&&cancelAnimationFrame(e.current)}),[s.isPlaying,h]),(0,i.useEffect)(()=>{s.highScore>0&&localStorage.setItem("dino-high-score",s.highScore.toString())},[s.highScore]),(0,i.useEffect)(()=>{if(!s.isPlaying)return;let e=setInterval(()=>{m(e=>(e+1)%2)},200);return()=>clearInterval(e)},[s.isPlaying]);let p=async()=>{if(l.trim())try{await t(s.score,"temp-uuid",l,"dino"),d(!1),alert("점수가 저장되었습니다!")}catch(e){console.error("Score save failed:",e),alert("점수 저장에 실패했습니다.")}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-github-text font-bold text-xl mb-3",children:"\uD83E\uDD96 Dino Runner"}),(0,r.jsx)("p",{className:"text-github-muted text-base mb-4",children:"스페이스바 또는 ↑로 점프, ↓로 숙이기"})]}),(0,r.jsxs)("div",{className:"relative flex justify-center items-end",style:{width:800,height:200,background:"#1c2128",borderRadius:8,border:"1px solid #30363d"},children:[(0,r.jsx)(I,{width:800,y:40}),(0,r.jsx)(C,{x:50,y:s.dinoY+20*!!s.isDucking,size:s.isDucking?20:40}),s.obstacles.map((e,t)=>"cactus"===e.type?(0,r.jsx)(E,{x:e.x,y:e.y,size:30},t):(0,r.jsx)(L,{x:e.x,y:e.y,size:30,frame:c},t)),(0,r.jsxs)("div",{style:{position:"absolute",left:10,top:10,color:"#f0f6fc",fontFamily:"monospace",fontSize:18,textShadow:"1px 1px 0 #222"},children:["Score: ",s.score,(0,r.jsx)("br",{}),"High Score: ",s.highScore,(0,r.jsx)("br",{}),"Speed: ",s.gameSpeed]})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[!s.isPlaying&&!s.isGameOver&&(0,r.jsx)("button",{onClick:u,className:"bg-yellow-600 text-white px-6 py-2 rounded font-bold border-2 border-yellow-300 shadow-dot hover:bg-yellow-700 transition-colors",style:{fontFamily:"monospace",fontSize:18},children:"게임 시작"}),s.isGameOver&&(0,r.jsxs)("div",{className:"text-center space-y-3",children:[(0,r.jsxs)("div",{className:"text-github-text font-bold text-lg",children:["게임 오버! 점수: ",s.score]}),o?(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()},className:"flex flex-col items-center space-y-2",children:[(0,r.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"닉네임 입력",className:"px-2 py-1 border rounded text-black",style:{fontFamily:"monospace",fontSize:16}}),(0,r.jsx)("button",{type:"submit",className:"bg-yellow-600 text-white px-4 py-1 rounded font-bold border-2 border-yellow-300 shadow-dot hover:bg-yellow-700 transition-colors",style:{fontFamily:"monospace",fontSize:16},children:"저장"})]}):(0,r.jsx)("button",{onClick:()=>d(!0),className:"bg-yellow-600 text-white px-4 py-2 rounded font-bold border-2 border-yellow-300 shadow-dot hover:bg-yellow-700 transition-colors",style:{fontFamily:"monospace",fontSize:16},children:"점수 저장하기"}),(0,r.jsx)("button",{onClick:u,className:"bg-gray-700 text-white px-4 py-2 rounded font-bold border-2 border-gray-400 shadow-dot hover:bg-gray-800 transition-colors",style:{fontFamily:"monospace",fontSize:16},children:"다시 시작"})]})]})]})}let O=["사랑","행복","희망","꿈","미래","성공","도전","열정","노력","인내","용기","신뢰","우정","가족","친구","동료","선생님","학생","직원","고객","회사","학교","집","도시","나라","세계","자연","산","바다","하늘","태양","달","별","구름","비","눈","바람","꽃","나무","풀","새","물고기","강아지","고양이","책","음악","영화","게임","운동","요리","여행","휴식","일","공부","놀이","웃음","울음","화남","기쁨","슬픔","두려움","놀람","평온","흥미","지루함","피곤함","활력","에너지","힘","약함","큰","작은","빠른","느린","따뜻한","차가운","밝은","어두운","부드러운","거친","예쁜","멋진","좋은","나쁜","맛있는","싫은","재미있는","지루한","어려운","쉬운","중요한","필요한","불필요한","특별한","일반적인","새로운","오래된","현재","과거","미래"],F="commantle-messages",T="commantle-correct";function R(e){let{uuid:t,nickname:s}=e,[a,l]=(0,i.useState)(null),[n,o]=(0,i.useState)(""),[d,c]=(0,i.useState)([]),[m,h]=(0,i.useState)(!0),[u,x]=(0,i.useState)(null),[g,p]=(0,i.useState)(!1),{addGameScore:f}=b(),[j,y]=(0,i.useState)("commantle");(0,i.useEffect)(()=>{l(function(e){let t=new Date,s=new Date(2024,0,1,0,0,0),r=Math.floor((t.getTime()-s.getTime())/864e5)%e.length;return e[r]}(O)),h(!1);let e=new Date().toISOString().slice(0,10),t=localStorage.getItem(F);t&&c(JSON.parse(t).filter(t=>t.date===e)),localStorage.getItem(T)===e&&p(!0)},[]);let N=async e=>{if(e.preventDefault(),!n.trim()||!a)return;let r=new Date().toISOString().slice(0,10),i=function(e,t){let s=k().d(e,!0).flat(),r=k().d(t,!0).flat(),i=new Set(s),a=new Set(r);return[...i].filter(e=>a.has(e)).length/Math.max(i.size,a.size,1)}(n.trim(),a),l=i>=1?{msg:"완벽하게 일치합니다!",emoji:"\uD83C\uDF89"}:i>=.75?{msg:"거의 맞췄어요!",emoji:"\uD83D\uDD25"}:i>=.5?{msg:"꽤 연관 있어요!",emoji:"\uD83D\uDE0E"}:i>=.3?{msg:"살짝 엇나갔네요",emoji:"\uD83E\uDD14"}:{msg:"노선이 좀 달라요...",emoji:"\uD83E\uDDCA"};x({score:i,msg:l.msg,emoji:l.emoji});let m=[...d,{text:n.trim(),date:r,sim:i}];c(m),localStorage.setItem(F,JSON.stringify(m)),o(""),i>=1&&(p(!0),localStorage.setItem(T,r),await f(m.length,t,s))},v=[...d].filter(e=>"number"==typeof e.sim).sort((e,t)=>{var s,r;return(null!=(s=t.sim)?s:0)-(null!=(r=e.sim)?r:0)}).slice(0,5);return(0,r.jsxs)("div",{className:"bg-github-card border border-github-border rounded-lg p-4 mt-6",children:[(0,r.jsxs)("div",{className:"flex mb-4 border-b border-github-border",children:[(0,r.jsx)("button",{className:"px-4 py-2 font-bold text-sm border-b-2 transition-colors duration-150 ".concat("commantle"===j?"border-green-500 text-green-400":"border-transparent text-github-muted hover:text-github-text"),onClick:()=>y("commantle"),children:"꼬맨틀"}),(0,r.jsx)("button",{className:"px-4 py-2 font-bold text-sm border-b-2 transition-colors duration-150 ".concat("dino"===j?"border-green-500 text-green-400":"border-transparent text-github-muted hover:text-github-text"),onClick:()=>y("dino"),children:"디노 러너"})]}),"commantle"===j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-github-text font-bold text-lg mb-3",children:"꼬맨틀(Commantle) 게임"}),(0,r.jsxs)("div",{className:"text-github-muted text-base mb-2",children:["오늘의 제시어: ",(0,r.jsx)("span",{className:"font-bold",children:m?"(로딩중)":a?k().d(a,!0).map(e=>e[0]).join(""):""})]}),(0,r.jsx)("div",{className:"text-github-muted text-sm mb-3",children:"\uD83D\uDCA1 정확히 100% 일치해야 게임이 완료됩니다!"}),(0,r.jsxs)("form",{onSubmit:N,className:"flex gap-2 mb-2",children:[(0,r.jsx)("input",{type:"text",className:"flex-1 border border-github-border rounded px-2 py-1 bg-github-bg text-github-text",placeholder:g?"정답을 맞추셨습니다!":"한 줄 멘트를 입력하세요",value:n,onChange:e=>o(e.target.value),disabled:m||g}),(0,r.jsx)("button",{type:"submit",className:"bg-github-green text-white rounded px-4 py-1 font-bold disabled:opacity-60",disabled:m||!n.trim()||g,children:"제출"})]}),u&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"text-2xl",children:u.emoji}),(0,r.jsxs)("div",{className:"text-github-text font-bold",children:["유사도: ",(100*u.score).toFixed(0),"%"]}),(0,r.jsx)("div",{className:"text-github-muted text-sm",children:u.msg}),(0,r.jsx)("div",{className:"flex-1 h-2 bg-github-border rounded ml-2",children:(0,r.jsx)("div",{className:"h-2 rounded bg-github-green",style:{width:"".concat(Math.round(100*u.score),"%"),transition:"width 0.7s"}})})]}),(0,r.jsx)("div",{className:"text-github-muted text-xs mt-2",children:"오늘의 꼬맨틀"}),(0,r.jsxs)("ul",{className:"mt-1 space-y-1",children:[0===v.length&&(0,r.jsx)("li",{className:"text-github-muted text-xs",children:"아직 멘트가 없습니다."}),v.map((e,t)=>{var s;return(0,r.jsxs)("li",{className:"bg-github-bg border border-github-border rounded px-2 py-1 text-github-text text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:e.text}),"number"==typeof e.sim&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"ml-2 text-github-muted text-xs",children:["(",(100*e.sim).toFixed(0),"%)"]}),(0,r.jsx)("div",{className:"flex-1 h-2 bg-github-border rounded ml-2",children:(0,r.jsx)("div",{className:"h-2 rounded\n                          ".concat(1===e.sim?"bg-green-700":e.sim>=.8?"bg-green-500":e.sim>=.6?"bg-green-300":"bg-gray-500/40","\n                        "),style:{width:"".concat(Math.round((null!=(s=e.sim)?s:0)*100),"%"),transition:"width 0.7s"}})})]})]},t)})]}),g&&(0,r.jsx)("div",{className:"text-github-green font-bold mt-3",children:"\uD83C\uDF89 정답을 맞추셨습니다! 오늘은 더 이상 입력할 수 없습니다."})]}):(0,r.jsx)(M,{})]})}let A=["꽃을 든","용기가 넘치는","희망찬","행복을 전하는","열정적인","상상력이 풍부한","긍정적인","에너지가 넘치는","웃음이 가득한","창의적인","빛나는","든든한","믿음직한","따뜻한","섬세한","도전적인","성실한","유쾌한","친절한","배려심 깊은"],z=["개발자","요리사","디자이너","분석가","작가","음악가","화가","선생님","연구원","마케터","기획자","운동선수","사진작가","정원사","건축가","의사","간호사","파일럿","탐험가","예술가"];function _(){let{nickname:e,isLoading:t,recordCommute:s,getTodayCommute:l,getTodayLeave:o,hasCommutedToday:d,hasLeftToday:m,uuid:h}=function(){let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[n,o]=(0,i.useState)(!1),{commutes:d,addCommute:c}=b();(0,i.useEffect)(()=>{let e=N();if(e)r(e);else{let e=y();r(e),v(e)}let t=(0,w.ND)();if(t)l(t);else{let e=(0,D.A)();(0,w.J9)(e),l(e)}},[]),(0,i.useEffect)(()=>{let e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),r=s+864e5;t(d.filter(e=>e.uuid===a&&e.timestamp>=s&&e.timestamp<r))},[d,a]);let m=async e=>{o(!0);try{let t={uuid:a,type:e,timestamp:Date.now(),nickname:s};return await c(t),t}catch(e){throw console.error("Failed to record commute:",e),e}finally{o(!1)}};return{todayRecords:e,nickname:s,isLoading:n,recordCommute:m,getTodayCommute:()=>e.find(e=>"출근"===e.type),getTodayLeave:()=>e.find(e=>"퇴근"===e.type),hasCommutedToday:()=>Array.isArray(e)&&e.some(e=>"출근"===e.type),hasLeftToday:()=>Array.isArray(e)&&e.some(e=>"퇴근"===e.type),uuid:a}}(),{addMood:u,commutes:x,moods:f,fetchMoods:j}=b(),[S,k]=(0,i.useState)(!1),[C,E]=(0,i.useState)(!0),[L,I]=(0,i.useState)("");(0,i.useEffect)(()=>{document.documentElement.classList.add("dark")},[]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{E(!1)},2500);return()=>clearTimeout(e)},[]),(0,i.useEffect)(()=>{I(function(){let e=A[Math.floor(Math.random()*A.length)],t=z[Math.floor(Math.random()*z.length)];return"".concat(e," ").concat(t)}())},[]);let M=async e=>{try{await s(e)}catch(e){console.error("Commute recording failed:",e)}},O=async(t,s)=>{k(!0);try{let r={emoji:t,message:s,timestamp:Date.now(),nickname:e};await u(r),await j(),alert("기분이 성공적으로 공유되었습니다!")}catch(e){console.error("Mood submission failed:",e),alert("기분 공유에 실패했습니다. 다시 시도해주세요.")}finally{k(!1)}},F=e=>new Date(e).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}),T=d();return(0,r.jsxs)("div",{className:"min-h-screen bg-github-bg text-github-text",children:[(0,r.jsx)("header",{className:"border-b border-github-border bg-github-card",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"text-3xl",children:"\uD83C\uDFE0"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-github-text",children:"아 집에가고싶다"})]}),(0,r.jsx)("div",{className:"text-github-muted text-base font-medium",children:e})]})})}),(0,r.jsx)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,r.jsx)("div",{className:"bg-github-card border border-github-border rounded-lg p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("img",{src:"https://api.dicebear.com/7.x/pixel-art/svg?seed=".concat(encodeURIComponent(e)),alt:"도트 프로필",className:"w-28 h-28 rounded-full mx-auto mb-4 border border-github-border bg-white"}),(0,r.jsx)("h2",{className:"text-github-text font-bold text-xl mb-2",children:L}),(0,r.jsx)("p",{className:"text-github-muted text-base mb-4",children:e}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[l()&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-github-bg rounded",children:[(0,r.jsx)("span",{className:"text-github-muted",children:"출근"}),(0,r.jsx)("span",{className:"text-github-green font-medium",children:F(l().timestamp)})]}),o()&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-github-bg rounded",children:[(0,r.jsx)("span",{className:"text-github-muted",children:"퇴근"}),(0,r.jsx)("span",{className:"text-orange-400 font-medium",children:F(o().timestamp)})]})]})]})}),(0,r.jsxs)("div",{className:"bg-github-card border border-github-border rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-github-text font-bold text-lg mb-4",children:"오늘의 출퇴근"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(a,{type:"출근",onClick:()=>M("출근"),isLoading:t||C,disabled:C,hasRecorded:d(),recordTime:l()?F(l().timestamp):void 0}),(0,r.jsx)(a,{type:"퇴근",onClick:()=>M("퇴근"),isLoading:t||C,disabled:C||!T,hasRecorded:m(),recordTime:o()?F(o().timestamp):void 0})]}),!T&&!d()&&!C&&(0,r.jsx)("div",{className:"text-github-muted text-xs mt-2 text-center",children:"\uD83D\uDCA1 출근 후에 퇴근할 수 있습니다"})]}),(0,r.jsx)(n,{onSubmit:O,isLoading:S,disabled:t||C}),(0,r.jsx)(g,{uuid:h})]}),(0,r.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,r.jsx)(c,{commutes:x,moods:f,myUuid:h}),(0,r.jsx)(R,{uuid:h,nickname:e}),(0,r.jsx)(p,{})]})]})}),(0,r.jsx)("footer",{className:"border-t border-github-border bg-github-card mt-12",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"text-center text-github-muted text-sm",children:[(0,r.jsx)("p",{children:"“오늘도 출근했습니다. 그리고 기분은요...”"}),(0,r.jsx)("p",{className:"mt-2",children:"\xa9 2024 아 집에가고싶다"})]})})})]})}},2056:(e,t,s)=>{"use strict";s.d(t,{Et:()=>a,J9:()=>n,ND:()=>l,yv:()=>i});let r={COMMUTE_RECORDS:"go-home-commute-records",MOOD_DATA:"go-home-mood-data"};function i(){let e=function(){try{let e=localStorage.getItem(r.COMMUTE_RECORDS);return e?JSON.parse(e):[]}catch(e){return[]}}(),t=new Date().toDateString();return e.filter(e=>new Date(e.timestamp).toDateString()===t)}function a(){let e=function(){try{let e=localStorage.getItem(r.MOOD_DATA);return e?JSON.parse(e):[]}catch(e){return[]}}(),t=new Date().toDateString();return e.filter(e=>new Date(e.timestamp).toDateString()===t)}function l(){return localStorage.getItem("go-home-uuid")}function n(e){localStorage.setItem("go-home-uuid",e)}},8713:(e,t,s)=>{Promise.resolve().then(s.bind(s,268))}},e=>{var t=t=>e(e.s=t);e.O(0,[647,97,441,684,358],()=>t(8713)),_N_E=e.O()}]);