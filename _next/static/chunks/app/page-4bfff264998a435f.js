(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2056:(e,t,r)=>{"use strict";r.d(t,{Et:()=>i,J9:()=>l,ND:()=>n,yv:()=>a});let s={COMMUTE_RECORDS:"go-home-commute-records",MOOD_DATA:"go-home-mood-data"};function a(){let e=function(){try{let e=localStorage.getItem(s.COMMUTE_RECORDS);return e?JSON.parse(e):[]}catch(e){return[]}}(),t=new Date().toDateString();return e.filter(e=>new Date(e.timestamp).toDateString()===t)}function i(){let e=function(){try{let e=localStorage.getItem(s.MOOD_DATA);return e?JSON.parse(e):[]}catch(e){return[]}}(),t=new Date().toDateString();return e.filter(e=>new Date(e.timestamp).toDateString()===t)}function n(){return localStorage.getItem("go-home-uuid")}function l(e){localStorage.setItem("go-home-uuid",e)}},5010:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);function a(e){let{mood:t}=e;return(0,s.jsx)("div",{className:"bg-github-card border border-github-border rounded-lg p-4 hover:border-github-muted transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"text-3xl",children:t.emoji}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"text-github-text font-medium truncate",children:t.nickname}),(0,s.jsx)("div",{className:"text-github-muted text-sm flex-shrink-0",children:new Date(t.timestamp).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsx)("div",{className:"text-github-text text-sm leading-relaxed",children:t.message})]})]})})}},5482:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var s=r(5155),a=r(2115),i=r(9434),n=r(3466);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});l.displayName=n.bL.displayName;let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n._V,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...a})});o.displayName=n._V.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.H4,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});function d(e){let{nickname:t,userId:r,onCommute:n,commuteTime:d,isLoading:m=!1}=e,[u,x]=(0,a.useState)(!1),h=async e=>{if(!m){x(!0);try{await n(e)}finally{x(!1)}}};return(0,s.jsxs)("div",{className:"flex flex-col space-y-4 p-4 rounded-lg bg-card text-card-foreground shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(l,{className:"h-12 w-12",children:[(0,s.jsx)(o,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(encodeURIComponent(t),"&backgroundColor=transparent&radius=50"),alt:t}),(0,s.jsx)(c,{className:"bg-black text-white text-lg",children:t.slice(0,2)})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h2",{className:"text-sm font-medium leading-none",children:t}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:r})]})]}),(0,s.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("button",{onClick:()=>h("출근"),disabled:m||!!(null==d?void 0:d.start),className:(0,i.cn)("w-full inline-flex items-center justify-center","rounded-md text-sm font-medium transition-colors","bg-white text-black border border-input shadow-sm","hover:bg-black hover:text-white","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:pointer-events-none disabled:opacity-50","h-9 px-4",u&&"scale-98"),children:[m?(0,s.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,(null==d?void 0:d.start)?"출근 완료 (".concat(d.start,")"):"출근하기"]})}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("button",{onClick:()=>h("퇴근"),disabled:m||!(null==d?void 0:d.start)||!!(null==d?void 0:d.end),className:(0,i.cn)("w-full inline-flex items-center justify-center","rounded-md text-sm font-medium transition-colors","bg-white text-black border border-input shadow-sm","hover:bg-black hover:text-white","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:pointer-events-none disabled:opacity-50","h-9 px-4",u&&"scale-98"),children:[m?(0,s.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,(null==d?void 0:d.end)?"퇴근 완료 (".concat(d.end,")"):"퇴근하기"]})})]})]})}c.displayName=n.H4.displayName;var m=r(6695),u=r(4624);let x=(0,r(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function h(e){let{className:t,variant:r,size:a,asChild:n=!1,...l}=e,o=n?u.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,i.cn)(x({variant:r,size:a,className:t})),...l})}function g(e){let{children:t,htmlFor:r,className:a}=e;return(0,s.jsx)("label",{htmlFor:r,className:["block text-sm font-medium text-muted-foreground mb-1",a].join(" "),children:t})}function b(e){let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:["w-full rounded-md border border-gray-700 bg-background px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 resize-none",t].join(" "),...r})}function f(e){let{className:t}=e;return(0,s.jsxs)("svg",{className:["animate-spin h-4 w-4 text-white",t].join(" "),viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}let p=[{emoji:"\uD83D\uDE0A",label:"행복"},{emoji:"\uD83D\uDE03",label:"신남"},{emoji:"\uD83D\uDE0C",label:"평온"},{emoji:"\uD83D\uDE34",label:"졸림"},{emoji:"\uD83D\uDE24",label:"열심"},{emoji:"\uD83D\uDE05",label:"힘듦"},{emoji:"\uD83D\uDE14",label:"우울"},{emoji:"\uD83D\uDE21",label:"화남"}];function j(e){let{onSubmit:t,isLoading:r=!1,disabled:i=!1}=e,[n,l]=(0,a.useState)(""),[o,c]=(0,a.useState)("");return(0,s.jsxs)(m.Zp,{className:"max-w-md mx-auto border border-gray-700",children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsx)(m.ZB,{children:"오늘 기분은 어떠세요?"}),(0,s.jsx)(m.BT,{children:"하루의 감정을 이모지와 함께 기록해보세요"})]}),(0,s.jsx)(m.Wu,{children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&o.trim()&&!r&&!i&&(t(n,o.trim()),c(""))},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(g,{children:"기분 선택"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-1",children:p.map(e=>(0,s.jsx)(h,{type:"button",variant:n===e.emoji?"default":"outline",className:"h-12 text-lg transition-all duration-200 border ".concat(n===e.emoji?"scale-105 ring-2 ring-primary":"border-gray-700"," ").concat(i?"opacity-50 cursor-not-allowed":""),onClick:()=>l(e.emoji),disabled:i,title:e.label,children:e.emoji},e.emoji))})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(g,{htmlFor:"message",children:"한 줄 메시지"}),(0,s.jsx)(b,{id:"message",value:o,onChange:e=>c(e.target.value),disabled:i||r,placeholder:"오늘 기분을 한 줄로 표현해보세요...",rows:2,maxLength:100}),(0,s.jsxs)("div",{className:"text-right text-xs text-muted-foreground",children:[o.length,"/100"]})]}),(0,s.jsx)(h,{type:"submit",className:"w-full ".concat(!n||!o.trim()||r||i?"bg-gray-200 text-gray-400 border border-gray-700 hover:bg-gray-200 hover:text-gray-400":""),disabled:!n||!o.trim()||r||i,children:r?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsx)(f,{className:"mr-2"}),"공유 중..."]}):"기분 공유하기"})]})})]})}var v=r(4065),y=r(2502);function N(e){let{commutes:t,moods:r,myUuid:i}=e,[n,l]=(0,a.useState)({totalUsers:0,earlyBird:"아직 없음",nightOwl:"아직 없음",moodDistribution:[],commuteTimesGo:[],commuteTimesLeave:[],myGoRank:null,myLeaveRank:null,goTotal:0,leaveTotal:0}),[o,c]=(0,a.useState)(!1),d=new Date,m=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime(),u=m+864e5,x=r.filter(e=>e.timestamp>=m&&e.timestamp<u),h={};x.forEach(e=>{h[e.emoji]=(h[e.emoji]||0)+1});let g=Object.entries(h).map(e=>{let[t,r]=e;return{emoji:t,count:r}}).sort((e,t)=>t.count-e.count),b=o?g:g.slice(0,5);return(0,a.useEffect)(()=>{let e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a=s+864e5,n=t.filter(e=>e.timestamp>=s&&e.timestamp<a),o=r.filter(e=>e.timestamp>=s&&e.timestamp<a),c=n.filter(e=>"출근"===e.type).sort((e,t)=>e.timestamp-t.timestamp),d=n.filter(e=>"퇴근"===e.type).sort((e,t)=>e.timestamp-t.timestamp),m=c.findIndex(e=>e.uuid===i),u=d.findIndex(e=>e.uuid===i),x=new Set([...o.map(e=>e.nickname),...n.map(e=>e.nickname)]).size,h=c[0],g=d[0],f={};c.forEach(e=>{let t=new Date(e.timestamp).getHours();f[t]=(f[t]||0)+1});let p=Object.entries(f).map(e=>{let[t,r]=e;return{hour:parseInt(t),count:r}}).sort((e,t)=>e.hour-t.hour),j={};d.forEach(e=>{let t=new Date(e.timestamp).getHours();j[t]=(j[t]||0)+1});let v=Object.entries(j).map(e=>{let[t,r]=e;return{hour:parseInt(t),count:r}}).sort((e,t)=>e.hour-t.hour);l({totalUsers:x,earlyBird:(null==h?void 0:h.nickname)||"아직 없음",nightOwl:(null==g?void 0:g.nickname)||"아직 없음",moodDistribution:b,commuteTimesGo:p,commuteTimesLeave:v,myGoRank:m>=0?m+1:null,myLeaveRank:u>=0?u+1:null,goTotal:c.length,leaveTotal:d.length})},[t,r,i,b]),(0,s.jsxs)("div",{className:"bg-github-card border border-thin border-github-borderLight rounded-md p-4",children:[(0,s.jsx)("h2",{className:"text-github-text font-bold mb-4 text-lg",children:"\uD83D\uDCCA 오늘의 통계"}),(n.myGoRank||n.myLeaveRank)&&(0,s.jsxs)("div",{className:"mb-3 text-center text-sm",children:[(0,s.jsx)("span",{className:"font-bold text-github-green",children:n.myGoRank?"출근 ".concat(n.myGoRank,"등"):""}),n.myGoRank&&n.myLeaveRank&&(0,s.jsx)("span",{className:"mx-2",children:"|"}),(0,s.jsx)("span",{className:"font-bold text-purple-500",children:n.myLeaveRank?"퇴근 ".concat(n.myLeaveRank,"등"):""}),(0,s.jsxs)("span",{className:"ml-2 text-github-muted text-xs",children:["(출근 ",n.goTotal,"명, 퇴근 ",n.leaveTotal,"명)"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-base font-bold text-github-green mb-1",children:n.totalUsers}),(0,s.jsx)("div",{className:"text-github-muted text-xs",children:"참여자"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-base font-bold text-yellow-500 mb-1",children:"\uD83C\uDF05"}),(0,s.jsx)("div",{className:"text-github-muted text-xs",children:"출근왕"}),(0,s.jsx)("div",{className:"text-github-text text-xs mt-1 truncate",children:n.earlyBird})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-base font-bold text-purple-500 mb-1",children:"\uD83C\uDF19"}),(0,s.jsx)("div",{className:"text-github-muted text-xs",children:"칼퇴왕"}),(0,s.jsx)("div",{className:"text-github-text text-xs mt-1 truncate",children:n.nightOwl})]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-stretch mb-2",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-[180px] bg-github-card border border-thin border-github-borderLight rounded-md flex flex-col items-center p-2",children:[(0,s.jsxs)("h3",{className:"text-github-text text-xs font-medium mb-2 text-center flex items-center",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-400 mr-2"}),"기분 분포"]}),n.moodDistribution.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Vd,{data:{labels:n.moodDistribution.map(e=>e.emoji),datasets:[{label:"기분 분포",data:n.moodDistribution.map(e=>e.count),backgroundColor:"rgba(34,197,94,0.2)",borderColor:"rgba(34,197,94,1)",borderWidth:2,pointBackgroundColor:"rgba(34,197,94,1)",pointBorderColor:"#fff",pointRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{r:{angleLines:{display:!1},grid:{color:"#333"},pointLabels:{color:"#fff",font:{size:12}},ticks:{color:"#fff",stepSize:1,backdropColor:"transparent"},min:0}}},style:{maxWidth:160,margin:"0 auto"}}),(0,s.jsx)("ul",{className:"flex flex-wrap gap-2 justify-center mt-2",children:b.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center gap-1 text-sm bg-github-bg border border-github-border rounded px-2 py-1",children:[(0,s.jsx)("span",{children:e.emoji}),(0,s.jsxs)("span",{className:"text-github-muted text-xs",children:[e.count,"명"]})]},t))}),g.length>5&&(0,s.jsx)("button",{className:"mt-2 text-xs text-github-green underline hover:text-github-green/80",onClick:()=>c(e=>!e),children:o?"접기":"더보기"})]}):(0,s.jsx)("div",{className:"text-github-muted text-center py-4 text-xs",children:"데이터 없음"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-[180px] bg-github-card border border-thin border-github-borderLight rounded-md flex flex-col items-center p-2",children:[(0,s.jsx)("h3",{className:"text-github-text text-xs font-medium mb-2 text-center",children:"\uD83C\uDF05 출근 시간 분포"}),(0,s.jsx)(v.O5,{data:{labels:Array.from({length:24},(e,t)=>"".concat(t,"시")),datasets:[{label:"출근",data:Array.from({length:24},(e,t)=>{var r;return(null==(r=n.commuteTimesGo.find(e=>e.hour===t))?void 0:r.count)||0}),backgroundColor:Array.from({length:24},(e,t)=>"rgba(34,197,94,".concat(.3+t/23*.7,")")),borderColor:"rgba(34,197,94,1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#161b22",titleColor:"#c9d1d9",bodyColor:"#c9d1d9",borderColor:"#21262d",borderWidth:1}},scales:{r:{grid:{color:"#333"},pointLabels:{color:"#c9d1d9",font:{size:10}},ticks:{color:"#8b949e",backdropColor:"transparent",stepSize:1}}}},style:{maxWidth:160,margin:"0 auto"}})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-[180px] bg-github-card border border-thin border-github-borderLight rounded-md flex flex-col items-center p-2",children:[(0,s.jsx)("h3",{className:"text-github-text text-xs font-medium mb-2 text-center",children:"\uD83C\uDF19 퇴근 시간 분포"}),(0,s.jsx)(v.O5,{data:{labels:Array.from({length:24},(e,t)=>"".concat(t,"시")),datasets:[{label:"퇴근",data:Array.from({length:24},(e,t)=>{var r;return(null==(r=n.commuteTimesLeave.find(e=>e.hour===t))?void 0:r.count)||0}),backgroundColor:Array.from({length:24},(e,t)=>"rgba(139,92,246,".concat(.3+t/23*.7,")")),borderColor:"rgba(139,92,246,1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#161b22",titleColor:"#c9d1d9",bodyColor:"#c9d1d9",borderColor:"#21262d",borderWidth:1}},scales:{r:{grid:{color:"#333"},pointLabels:{color:"#c9d1d9",font:{size:10}},ticks:{color:"#8b949e",backdropColor:"transparent",stepSize:1}}}},style:{maxWidth:160,margin:"0 auto"}})]})]}),0===n.totalUsers&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC8"}),(0,s.jsx)("div",{className:"text-github-muted",children:"아직 데이터가 없어요."}),(0,s.jsx)("div",{className:"text-github-muted text-sm mt-2",children:"첫 번째로 출근/퇴근을 기록해보세요!"})]})]})}y.t1.register(y.pr,y.FN,y.No,y.dN,y.m_,y.s$,y.G5,y.Bs);var w=r(5647);let S="https://yrrmtcvviactkmxibodu.supabase.co",D="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlycm10Y3Z2aWFjdGtteGlib2R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0NDA4MjYsImV4cCI6MjA2NzAxNjgyNn0.K1ZxrtCWKCLLpPNJf0CkR0H7LRNsvMb07Uy2TuFXwh0",k=()=>{if(!S||!D)throw Error("Supabase 환경변수가 누락되었습니다.");return(0,w.UU)(S,D)},C=(0,a.createContext)(void 0),R=e=>{let{children:t}=e,[r,s]=(0,a.useState)([]),[i,n]=(0,a.useState)([]),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),m=async()=>{try{let{data:e,error:t}=await k().from("commutes").select("*").order("timestamp",{ascending:!1}).limit(50);if(t)throw t;s(e||[])}catch(e){console.error("출퇴근 기록 가져오기 실패:",e)}},u=async()=>{try{let{data:e,error:t}=await k().from("moods").select("*").order("timestamp",{ascending:!1}).limit(50);if(t)throw t;n(e||[])}catch(e){console.error("기분 데이터 가져오기 실패:",e)}},x=async()=>{try{let e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset(),r=new Date(t+324e5),s=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0"),n="".concat(s,"-").concat(a,"-").concat(i),{data:l,error:c}=await k().from("game_scores").select("*").eq("game","commantle").gte("created_at",n+"T00:00:00+09:00").lte("created_at",n+"T23:59:59+09:00").order("score",{ascending:!0}).order("created_at",{ascending:!0});if(c)throw c;o(l||[])}catch(e){console.error("게임 스코어 가져오기 실패:",e)}},h=async()=>{try{let{data:e,error:t}=await k().from("game_scores").select("*").eq("game","dino").order("score",{ascending:!1}).order("created_at",{ascending:!0}).limit(10);if(t)throw t;return e||[]}catch(e){return console.error("디노 러너 랭킹 가져오기 실패:",e),[]}},g=async e=>{try{let{error:t}=await k().from("commutes").insert([e]);if(t)throw t;await m()}catch(e){throw console.error("출퇴근 기록 추가 실패:",e),e}},b=async e=>{try{let{error:t}=await k().from("moods").insert([e]);if(t)throw t;await u()}catch(e){throw console.error("기분 데이터 추가 실패:",e),e}},f=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"commantle";try{console.log("[addGameScore] params",{nickname:t,game:r,score:e});let s=new Date,a=s.getTime()+6e4*s.getTimezoneOffset(),i=new Date(a+324e5),n=i.getFullYear(),l=String(i.getMonth()+1).padStart(2,"0"),o=String(i.getDate()).padStart(2,"0"),c="".concat(n,"-").concat(l,"-").concat(o),d=i.toISOString(),{data:m,error:u}=await k().from("game_scores").select("*").eq("nickname",t).eq("game",r).gte("created_at",c+"T00:00:00+09:00").lte("created_at",c+"T23:59:59+09:00").single();if(u&&"PGRST116"!==u.code)throw u;if(m){let t=m.score;if(e<t){console.log("[addGameScore] UPDATE");let{error:t}=await k().from("game_scores").update({score:e,created_at:d}).eq("id",m.id).select();if(t)throw t}else console.log("[addGameScore] UPDATE SKIP (score not better)")}else{console.log("[addGameScore] INSERT");let{error:s}=await k().from("game_scores").insert([{nickname:t,game:r,score:e,created_at:d}]).select();if(s)throw console.error("[addGameScore] INSERT error:",s),s}await x()}catch(e){throw console.error("[addGameScore] 에러 발생:",e),e}};return(0,a.useEffect)(()=>{(async()=>{d(!0),await Promise.all([m(),u(),x()]),d(!1)})()},[]),a.createElement(C.Provider,{value:{commutes:r,moods:i,gameScores:l,loading:c,addCommute:g,addMood:b,fetchCommutes:m,fetchMoods:u,fetchGameScores:x,addGameScore:f,fetchDinoScores:h}},t)},T=()=>{let e=(0,a.useContext)(C);if(!e)throw Error("useSupabaseContext must be used within a SupabaseProvider");return e};var E=r(5010);function I(e){let{uuid:t,game:r="commantle"}=e,{gameScores:i,loading:n,fetchDinoScores:l}=T(),[o,c]=(0,a.useState)([]),[d,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{"dino"===r&&(m(!0),l().then(e=>{c(e),m(!1)}))},[r,l]);let u="dino"===r?o:i,x="dino"===r?d:n;return(0,s.jsxs)("div",{className:"bg-github-card border border-github-border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-github-text font-bold mb-3 text-lg",children:"dino"===r?"디노러너 최고 점수 랭킹":"오늘의 꼬맨틀 순위"}),x?(0,s.jsx)("div",{className:"text-github-muted text-sm",children:"로딩 중..."}):0===u.length?(0,s.jsx)("div",{className:"text-github-muted text-sm",children:"아직 순위가 없습니다."}):(0,s.jsx)("ol",{className:"space-y-2",children:u.map((e,a)=>(0,s.jsxs)("li",{className:"flex justify-between items-center px-3 py-2 rounded ".concat(e.uuid===t?"bg-github-green/20 font-bold":""," ").concat(0===a?"bg-yellow-300/30":1===a?"bg-gray-300/30":2===a?"bg-orange-400/20":""),children:[(0,s.jsxs)("span",{className:"text-github-text flex items-center gap-1",children:[0===a&&(0,s.jsx)("span",{className:"text-yellow-400",children:"\uD83E\uDD47"}),1===a&&(0,s.jsx)("span",{className:"text-gray-300",children:"\uD83E\uDD48"}),2===a&&(0,s.jsx)("span",{className:"text-orange-400",children:"\uD83E\uDD49"}),a+1,"위"]}),(0,s.jsx)("span",{className:"text-github-muted text-sm",children:e.nickname}),(0,s.jsxs)("span",{className:"text-github-text",children:[e.score,"dino"===r?"점":"회"]})]},e.id))}),(0,s.jsx)("div",{className:"text-github-muted text-xs mt-3",children:"dino"===r?"※ 점수가 높을수록 순위가 높아요! (상위 10명, 매일 초기화 없음)":"※ 시도 횟수가 적을수록 순위가 높아요!\n매일 0시 초기화"})]})}let O=(0,a.forwardRef)((e,t)=>{let{uuid:r}=e,[i,n]=(0,a.useState)("moods");(0,a.useImperativeHandle)(t,()=>({setActiveTab:n}));let{moods:l,commutes:o,loading:c,fetchDinoScores:d}=T(),[m,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!1),g=new Date,b=new Date(g.getFullYear(),g.getMonth(),g.getDate()).getTime(),f=b+864e5,p=l.filter(e=>e.timestamp>=b&&e.timestamp<f).sort((e,t)=>t.timestamp-e.timestamp),j=o.filter(e=>e.timestamp>=b&&e.timestamp<f).sort((e,t)=>t.timestamp-e.timestamp);(0,a.useEffect)(()=>{x||d().then(e=>{u(e),h(!0)})},[d,x]);let v=e=>new Date(e).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});return c?(0,s.jsx)("div",{className:"bg-github-card border border-github-border rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-center h-32",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-github-green"}),(0,s.jsx)("span",{className:"ml-2 text-github-text",children:"피드 로딩 중..."})]})}):(0,s.jsxs)("div",{className:"bg-github-card border border-thin border-github-borderLight rounded-md",children:[(0,s.jsx)("div",{className:"border-b border-thin border-github-borderLight",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("button",{onClick:()=>n("moods"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("moods"===i?"text-github-green border-b border-github-green":"text-github-muted hover:text-github-text"),children:["\uD83D\uDE0A 기분 (",p.length,")"]}),(0,s.jsxs)("button",{onClick:()=>n("commutes"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("commutes"===i?"text-github-green border-b border-github-green":"text-github-muted hover:text-github-text"),children:["⏰ 출퇴근 (",j.length,")"]}),(0,s.jsx)("button",{onClick:()=>n("commantle"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("commantle"===i?"text-github-green border-b border-github-green":"text-github-muted hover:text-github-text"),children:"\uD83D\uDCDD 꼬맨틀 순위"}),(0,s.jsx)("button",{onClick:()=>n("dino"),className:"flex-1 py-3 px-4 text-sm font-medium transition-colors ".concat("dino"===i?"text-github-green border-b border-github-green":"text-github-muted hover:text-github-text"),children:"\uD83E\uDD96 디노 러너 순위"})]})}),(0,s.jsx)("div",{className:"p-4",children:"moods"===i?(0,s.jsxs)("div",{className:"space-y-4",children:[p.length>0?p.slice(0,5).map((e,t)=>(0,s.jsx)(E.A,{mood:e},"".concat(e.timestamp,"-").concat(t))):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-2xl mb-3",children:"\uD83D\uDE34"}),(0,s.jsx)("div",{className:"text-github-muted text-sm",children:"아직 아무도 기분을 공유하지 않았어요."}),(0,s.jsx)("div",{className:"text-github-muted text-xs mt-2",children:"첫 번째로 기분을 공유해보세요!"})]}),p.length>5&&(0,s.jsx)("div",{className:"text-center pt-4",children:(0,s.jsxs)("div",{className:"text-github-muted text-xs",children:["+",p.length-5,"개의 기분 더 보기"]})})]}):"commutes"===i?(0,s.jsxs)("div",{className:"space-y-3",children:[j.length>0?j.slice(0,8).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-github-bg rounded-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-base ".concat("출근"===e.type?"text-github-green":"text-orange-500"),children:"출근"===e.type?"\uD83C\uDF05":"\uD83C\uDFE0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-github-text font-medium text-sm",children:e.nickname}),(0,s.jsx)("div",{className:"text-github-muted text-xs",children:e.type})]})]}),(0,s.jsx)("div",{className:"text-github-muted text-xs",children:v(e.timestamp)})]},e.id)):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-2xl mb-3",children:"⏰"}),(0,s.jsx)("div",{className:"text-github-muted text-sm",children:"아직 아무도 출퇴근을 기록하지 않았어요."}),(0,s.jsx)("div",{className:"text-github-muted text-xs mt-2",children:"첫 번째로 출근/퇴근을 기록해보세요!"})]}),j.length>8&&(0,s.jsx)("div",{className:"text-center pt-4",children:(0,s.jsxs)("div",{className:"text-github-muted text-xs",children:["+",j.length-8,"개의 기록 더 보기"]})})]}):"commantle"===i?(0,s.jsx)(I,{uuid:r}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-center font-bold text-lg mb-2",children:"디노 러너 랭킹 TOP 10"}),x?m.length>0?(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-github-borderLight",children:[(0,s.jsx)("th",{className:"py-1",children:"순위"}),(0,s.jsx)("th",{className:"py-1",children:"닉네임"}),(0,s.jsx)("th",{className:"py-1",children:"점수"}),(0,s.jsx)("th",{className:"py-1",children:"날짜"})]})}),(0,s.jsx)("tbody",{children:m.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-github-borderLight ".concat(0===t?"bg-yellow-300/30":1===t?"bg-gray-300/30":2===t?"bg-orange-400/20":""),children:[(0,s.jsxs)("td",{className:"py-1 font-bold flex items-center gap-1",children:[0===t&&(0,s.jsx)("span",{className:"text-yellow-400",children:"\uD83E\uDD47"}),1===t&&(0,s.jsx)("span",{className:"text-gray-300",children:"\uD83E\uDD48"}),2===t&&(0,s.jsx)("span",{className:"text-orange-400",children:"\uD83E\uDD49"}),t+1]}),(0,s.jsx)("td",{className:"py-1",children:e.nickname}),(0,s.jsx)("td",{className:"py-1",children:e.score}),(0,s.jsx)("td",{className:"py-1",children:e.created_at.slice(0,10)})]},e.id))})]}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-2xl mb-3",children:"\uD83E\uDD96"}),(0,s.jsx)("div",{className:"text-github-muted text-sm",children:"아직 디노 러너 기록이 없습니다."})]}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-github-green mx-auto mb-2"}),(0,s.jsx)("div",{className:"text-github-muted text-sm",children:"랭킹 로딩 중..."})]})]})})]})});O.displayName="FeedSection";let A=["즐거운","신나는","평온한","활기찬","차분한","열정적인","창의적인","꼼꼼한","친절한","유쾌한","진지한","유연한","성실한","도전적인","긍정적인","배려하는","책임감있는","협력하는"],M=["개발자","디자이너","기획자","마케터","영업사원","회계사","의사","교사","엔지니어","작가","예술가","요리사","운동선수","음악가","사진작가","여행자","독서가","요가인"];var L=r(2056),_=r(1368),F=r(5418),J=r.n(F);function z(e){let{uuid:t,nickname:r}=e,i=(0,a.useRef)(null),[n,l]=(0,a.useState)(0),[o,c]=(0,a.useState)(!1),{addGameScore:d,fetchDinoScores:m}=T(),[u,x]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),b=(0,a.useRef)({x:50,y:110,vy:0,isJumping:!1}),f=(0,a.useRef)(0),p=(0,a.useRef)([]),j=(0,a.useRef)(6),v=(0,a.useRef)(0),y=e=>{("Space"===e.code||"ArrowUp"===e.code)&&(e.preventDefault(),f.current<2&&(b.current.vy=-9,b.current.isJumping=!0,f.current+=1))};(0,a.useEffect)(()=>(document.addEventListener("keydown",y),o||(v.current=requestAnimationFrame(N)),()=>{cancelAnimationFrame(v.current),document.removeEventListener("keydown",y)}),[o]),(0,a.useEffect)(()=>{o&&!h&&t&&r&&(async()=>{try{let e=await m();console.log("[DinoRunner] fetchDinoScores:",e);let s=e.find(e=>e.uuid===t);console.log("[DinoRunner] uuid:",t,"nickname:",r,"score:",n,"myScore:",s),!s||n>s.score?(console.log("[DinoRunner] addGameScore 호출"),await d(n,r,"dino"),x("신기록! 랭킹에 반영됩니다.")):x("기존 최고점 미달, 저장되지 않습니다."),g(!0)}catch(e){console.error("[DinoRunner] 저장 실패",e),x("저장 실패! 다시 시도해 주세요."),g(!0)}})(),o||(g(!1),x(""))},[o,t,r]);let N=()=>{var e,t;let r=i.current,s=null==r?void 0:r.getContext("2d");if(!s||o)return;s.fillStyle="#2d333b",s.fillRect(0,0,800,200),s.fillStyle="#444c56",s.fillRect(0,150,800,2),b.current.vy+=.6,b.current.y+=b.current.vy,b.current.y>=110&&(b.current.y=110,b.current.vy=0,b.current.isJumping=!1,f.current=0),e=b.current.x,t=b.current.y,s.fillStyle="#6ee7b7",s.fillRect(e+8,t+20,24,14),s.fillRect(e+12,t+34,6,6),s.fillRect(e+22,t+34,6,6),s.fillStyle="#34d399",s.fillRect(e,t+26,8,8),s.fillStyle="#6ee7b7",s.fillRect(e+28,t+10,10,10),s.fillStyle="#222",s.fillRect(e+36,t+14,2,2);let a=Math.floor(n/500),d=Math.min(.02+.005*a,.05),m=Math.min(14+2*a,30),u=Math.min(28+2*a,40);Math.random()<d&&p.current.push({x:800,y:150-u,width:m,height:u}),p.current.forEach(e=>{e.x-=j.current}),p.current=p.current.filter(e=>e.x+e.width>0),s.fillStyle="#2ea043",p.current.forEach(e=>{s.fillRect(e.x,e.y,e.width,e.height)});let x=!1;if(p.current.forEach(e=>{let t=b.current.x,r=b.current.y;t<e.x+e.width&&t+40>e.x&&r<e.y+e.height&&r+40>e.y&&(x=!0)}),x){c(!0),cancelAnimationFrame(v.current);return}s.fillStyle="#adbac7",s.font="16px Arial",s.fillText("Score: ".concat(n),10,20),l(e=>e+1),n>0&&n%500==0&&(j.current+=1),v.current=requestAnimationFrame(N)};return(0,s.jsxs)("div",{style:{textAlign:"center",padding:"20px",background:"#22272e",minHeight:"320px",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:"100vw",overflowX:"hidden",boxSizing:"border-box"},children:[(0,s.jsx)("h2",{style:{color:"#adbac7"},children:"Dino Runner"}),(0,s.jsx)("canvas",{ref:i,width:800,height:200,style:{border:"1px solid #444c56",background:"#2d333b",borderRadius:"6px",display:"block",margin:"0 auto",maxWidth:"100%",height:"auto",boxSizing:"border-box"},onTouchStart:e=>{e.preventDefault(),f.current<2&&(b.current.vy=-9,b.current.isJumping=!0,f.current+=1)}}),(0,s.jsxs)("div",{style:{marginTop:"10px",color:"#adbac7"},children:["Score: ",n]}),o&&(0,s.jsxs)("div",{style:{marginTop:"16px"},children:[(0,s.jsx)("div",{style:{color:"#f85149",fontSize:"20px",marginBottom:"12px"},children:"Game Over!"}),(0,s.jsx)("div",{style:{color:"#adbac7",marginTop:8},children:u}),(0,s.jsx)("button",{onClick:()=>{b.current={x:50,y:110,vy:0,isJumping:!1},f.current=0,p.current=[],l(0),j.current=6,c(!1)},style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"10px 28px",fontSize:"18px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"background 0.2s"},children:"재시작"})]})]})}var G=r(1504),W=r.n(G);function U(e){return J().d(e,!0).map(e=>e[0]).join("")}let B="commantle-messages",P="commantle-correct",Y="commantle-hint";function Z(e){let{uuid:t,nickname:r}=e,[i,n]=(0,a.useState)(null),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(""),[m,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!0),[g,b]=(0,a.useState)(null),[f,p]=(0,a.useState)(null),[j,v]=(0,a.useState)(!1),{addGameScore:y,fetchGameScores:N}=T(),[w,S]=(0,a.useState)("commantle"),[D,k]=(0,a.useState)(0);(0,a.useEffect)(()=>{fetch("./commantle_keyword_list.json").then(e=>{if(!e.ok)throw Error("단어 리스트를 불러오지 못했습니다.");return e.json()}).then(e=>{if(!e.words||!Array.isArray(e.words)||0===e.words.length)throw Error("단어 리스트가 비어있습니다.");let t=e.words,r=t[(()=>{let e=new Date,r=new Date(2024,0,1,0,0,0);return Math.floor((e.getTime()-r.getTime())/864e5)%t.length})()];n(r.keyword),o(r.related||[]),h(!1);let s=new Date().toISOString().slice(0,10),a=localStorage.getItem(B);if(a){let e=JSON.parse(a),t=e.filter(e=>e.date===s);u(t),t.length!==e.length&&localStorage.setItem(B,JSON.stringify(t))}let i=localStorage.getItem(P),l=!1;if(i)try{let e=JSON.parse(i);e&&e.date===s&&e.keyword===r.keyword?l=!0:localStorage.removeItem(P)}catch(e){localStorage.removeItem(P)}v(l);let c=localStorage.getItem(Y),d=0;if(c)try{let e=JSON.parse(c);e&&e.date===s?d=e.count||0:localStorage.setItem(Y,JSON.stringify({date:s,count:0}))}catch(e){localStorage.setItem(Y,JSON.stringify({date:s,count:0}))}else localStorage.setItem(Y,JSON.stringify({date:s,count:0}));k(d)}).catch(e=>{b(e.message||"단어 불러오기 오류"),h(!1)})},[]);let C=async e=>{if(e.preventDefault(),!c.trim()||!i)return;let s=new Date().toISOString().slice(0,10),a=function(e,t){let r=J().d(e,!0).flat().join(""),s=J().d(t,!0).flat().join("");return 1-function(e,t){let r=Array.from({length:e.length+1},()=>Array(t.length+1).fill(0));for(let t=0;t<=e.length;t++)r[t][0]=t;for(let e=0;e<=t.length;e++)r[0][e]=e;for(let s=1;s<=e.length;s++)for(let a=1;a<=t.length;a++)r[s][a]=Math.min(r[s-1][a]+1,r[s][a-1]+1,r[s-1][a-1]+ +(e[s-1]!==t[a-1]));return r[e.length][t.length]}(r,s)/Math.max(r.length,s.length,1)}(c.trim(),i),n=a>=1?{msg:"완벽하게 일치합니다!",emoji:"\uD83C\uDF89"}:a>=.75?{msg:"거의 맞췄어요!",emoji:"\uD83D\uDD25"}:a>=.5?{msg:"꽤 연관 있어요!",emoji:"\uD83D\uDE0E"}:a>=.3?{msg:"살짝 엇나갔네요",emoji:"\uD83E\uDD14"}:{msg:"노선이 좀 달라요...",emoji:"\uD83E\uDDCA"};p({score:a,msg:n.msg,emoji:n.emoji});let l=[...m,{text:c.trim(),date:s,sim:a}];u(l),localStorage.setItem(B,JSON.stringify(l)),d(""),a<1&&m.length+1>=30&&0===D&&(k(1),localStorage.setItem(Y,JSON.stringify({date:s,count:1}))),a>=1&&(v(!0),localStorage.setItem(P,JSON.stringify({date:s,keyword:i})),console.log("[Commantle] addGameScore 호출",{score:l.length,id:t,nickname:r}),await y(l.length,r,"commantle"),"function"==typeof N&&await N())},R=[...m].filter(e=>"number"==typeof e.sim).sort((e,t)=>{var r,s;return(null!=(r=t.sim)?r:0)-(null!=(s=e.sim)?s:0)}).slice(0,5);return(0,s.jsxs)("div",{className:"bg-github-card border border-github-border rounded-lg p-4 mt-6",children:[(0,s.jsxs)("div",{className:"flex mb-4 border-b border-github-border",children:[(0,s.jsx)("button",{className:"px-4 py-2 font-bold text-sm border-b-2 transition-colors duration-150 ".concat("commantle"===w?"border-green-500 text-green-400":"border-transparent text-github-muted hover:text-github-text"),onClick:()=>S("commantle"),children:"꼬맨틀"}),(0,s.jsx)("button",{className:"px-4 py-2 font-bold text-sm border-b-2 transition-colors duration-150 ".concat("dino"===w?"border-green-500 text-green-400":"border-transparent text-github-muted hover:text-github-text"),onClick:()=>S("dino"),children:"디노 러너"})]}),"commantle"===w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"text-github-text font-bold text-lg mb-3",children:"꼬맨틀(Commantle) 게임"}),g?(0,s.jsx)("div",{className:"text-red-500 font-bold mb-2",children:g}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-github-muted text-base mb-2",children:["오늘의 제시어: ",(0,s.jsx)("span",{className:"font-bold",children:x?"(로딩중)":i?U(i):""})]}),(0,s.jsx)("div",{className:"text-github-muted text-sm mb-3",children:"\uD83D\uDCA1 정확히 100% 일치해야 게임이 완료됩니다!"}),D>0&&(0,s.jsxs)("div",{className:"hint-box bg-yellow-50 border border-yellow-300 rounded p-2 my-2 text-yellow-800",children:[(0,s.jsx)("strong",{children:"힌트:"})," ",l&&l.length>0?W()(l,Math.min(3,l.length)).join(", "):U(i||"")]}),(0,s.jsxs)("form",{onSubmit:C,className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",className:"flex-1 border border-github-border rounded px-2 py-1 bg-github-bg text-github-text",placeholder:j?"정답을 맞추셨습니다!":"한 줄 멘트를 입력하세요",value:c,onChange:e=>d(e.target.value),disabled:x||j||!!g}),(0,s.jsx)("button",{type:"submit",className:"bg-github-green text-white rounded px-4 py-1 font-bold disabled:opacity-60",disabled:x||!c.trim()||j||!!g,children:"제출"})]}),f&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"text-2xl",children:f.emoji}),(0,s.jsxs)("div",{className:"text-github-text font-bold",children:["유사도: ",(100*f.score).toFixed(0),"%"]}),(0,s.jsx)("div",{className:"text-github-muted text-sm",children:f.msg}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-github-border rounded ml-2",children:(0,s.jsx)("div",{className:"h-2 rounded bg-github-green",style:{width:"".concat(Math.round(100*f.score),"%"),transition:"width 0.7s"}})})]}),(0,s.jsx)("div",{className:"text-github-muted text-xs mt-2",children:"오늘의 꼬맨틀"}),(0,s.jsxs)("ul",{className:"mt-1 space-y-1",children:[0===R.length&&(0,s.jsx)("li",{className:"text-github-muted text-xs",children:"아직 멘트가 없습니다."}),R.map((e,t)=>{var r;return(0,s.jsxs)("li",{className:"bg-github-bg border border-github-border rounded px-2 py-1 text-github-text text-sm flex items-center gap-2",children:[(0,s.jsx)("span",{children:e.text}),"number"==typeof e.sim&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"ml-2 text-github-muted text-xs",children:["(",(100*e.sim).toFixed(0),"%)"]}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-github-border rounded ml-2",children:(0,s.jsx)("div",{className:"h-2 rounded\n                              ".concat(1===e.sim?"bg-green-700":e.sim>=.8?"bg-green-500":e.sim>=.6?"bg-green-300":"bg-gray-500/40","\n                            "),style:{width:"".concat(Math.round((null!=(r=e.sim)?r:0)*100),"%"),transition:"width 0.7s"}})})]})]},t)})]}),j&&(0,s.jsx)("div",{className:"text-github-green font-bold mt-3",children:"\uD83C\uDF89 정답을 맞추셨습니다! 오늘은 더 이상 입력할 수 없습니다."})]})]}):(0,s.jsx)(z,{uuid:t,nickname:r})]})}let q=["꽃을 든","용기가 넘치는","희망찬","행복을 전하는","열정적인","상상력이 풍부한","긍정적인","에너지가 넘치는","웃음이 가득한","창의적인","빛나는","든든한","믿음직한","따뜻한","섬세한","도전적인","성실한","유쾌한","친절한","배려심 깊은"],H=["개발자","요리사","디자이너","분석가","작가","음악가","화가","선생님","연구원","마케터","기획자","운동선수","사진작가","정원사","건축가","의사","간호사","파일럿","탐험가","예술가"];function K(){let{nickname:e,isLoading:t,recordCommute:r,getTodayCommute:i,getTodayLeave:n,uuid:l}=function(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(""),[i,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(!1),{commutes:c,addCommute:d}=T();(0,a.useEffect)(()=>{let e=localStorage.getItem("go-home-nickname");if(e)s(e);else{let e=function(){let e=A[Math.floor(Math.random()*A.length)],t=M[Math.floor(Math.random()*M.length)],r=Math.floor(9999*Math.random())+1;return"".concat(e).concat(t).concat(r)}();s(e),localStorage.setItem("go-home-nickname",e)}let t=(0,L.ND)();if(t)n(t);else{let e=(0,_.A)();(0,L.J9)(e),n(e)}},[]),(0,a.useEffect)(()=>{let e=new Date,r=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),s=r+864e5;t(c.filter(e=>e.uuid===i&&e.timestamp>=r&&e.timestamp<s))},[c,i]);let m=async e=>{o(!0);try{let t={uuid:i,type:e,timestamp:Date.now(),nickname:r};return await d(t),t}catch(e){throw console.error("Failed to record commute:",e),e}finally{o(!1)}};return{todayRecords:e,nickname:r,isLoading:l,recordCommute:m,getTodayCommute:()=>e.find(e=>"출근"===e.type),getTodayLeave:()=>e.find(e=>"퇴근"===e.type),hasCommutedToday:()=>Array.isArray(e)&&e.some(e=>"출근"===e.type),hasLeftToday:()=>Array.isArray(e)&&e.some(e=>"퇴근"===e.type),uuid:i}}(),{addMood:o,commutes:c,moods:m,fetchMoods:u}=T(),[x,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!0),[f,p]=(0,a.useState)(""),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{document.documentElement.classList.add("dark")},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{b(!1)},2500);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{p(function(){let e=q[Math.floor(Math.random()*q.length)],t=H[Math.floor(Math.random()*H.length)];return"".concat(e," ").concat(t)}())},[]);let y=async e=>{try{await r(e)}catch(e){console.error("Commute recording failed:",e)}},w=async(t,r)=>{h(!0);try{let s={emoji:t,message:r,timestamp:Date.now(),nickname:e};await o(s),await u(),v.current&&"function"==typeof v.current.setActiveTab&&v.current.setActiveTab("moods")}catch(e){console.error("Mood submission failed:",e)}finally{h(!1)}},S=e=>new Date(e).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"min-h-screen bg-github-bg text-github-text",children:[(0,s.jsx)("header",{className:"border-b border-github-border bg-github-card",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"text-3xl",children:"\uD83C\uDFE0"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-github-text",children:"아 집에가고싶다"})]}),(0,s.jsx)("div",{className:"text-github-muted text-base font-medium",children:e})]})})}),(0,s.jsx)("main",{className:"max-w-6xl mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,s.jsx)(d,{nickname:f,userId:e,onCommute:y,commuteTime:{start:i()?S(i().timestamp):void 0,end:n()?S(n().timestamp):void 0},isLoading:t||g}),(0,s.jsx)(j,{onSubmit:w,isLoading:x,disabled:t||g})]}),(0,s.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[(0,s.jsx)(N,{commutes:c,moods:m,myUuid:l}),(0,s.jsx)(Z,{uuid:l,nickname:e}),(0,s.jsx)(O,{ref:v,uuid:l})]})]})}),(0,s.jsx)("footer",{className:"border-t border-github-border bg-github-card mt-12",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"text-center text-github-muted text-sm",children:[(0,s.jsx)("p",{children:"“오늘도 출근했습니다. 그리고 기분은요...”"}),(0,s.jsx)("p",{className:"mt-2",children:"\xa9 2025 아 집에가고싶다"})]})})})]})}function V(){return(0,s.jsx)(R,{children:(0,s.jsx)(K,{})})}},5954:(e,t,r)=>{Promise.resolve().then(r.bind(r,5482))},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n});var s=r(5155);r(2115);var a=r(9434);function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2596),a=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[647,277,338,441,684,358],()=>t(5954)),_N_E=e.O()}]);